{% extends 'customers/base.html' %}

{% block title %}Purchase Details - Sachdeva Opticals{% endblock %}

{% block content %}
<div class="main-container">
    <div class="card mb-4">
        <div class="card-header bg-primary text-white">
            <h2 class="mb-0"><i class="fas fa-shopping-cart"></i> Purchase Details</h2>
        </div>
        <div class="card-body">
            <div class="row">
                <!-- Purchase Information -->
                <div class="col-md-6">
                    <h4 class="section-title text-primary"><i class="fas fa-info-circle"></i> Purchase Information</h4>
                    <div class="info-box">
                        <p><strong>Date of Purchase:</strong> {{ purchase.date_of_purchase }}</p>
                        <p><strong>Purchase Type:</strong> {{ purchase.get_purchase_type_display }}</p>
                        <p><strong>Total Cost:</strong> ₹{{ purchase.total_cost }}</p>
                    </div>
                </div>

                <!-- Product Details -->
                <div class="col-md-6">
                    <h4 class="section-title text-primary"><i class="fas fa-box"></i> Product Details</h4>
                    <div class="info-box">
                        <p><strong>Lens Name:</strong> {{ purchase.lens_name }}</p>
                        <p><strong>Lens Type:</strong> {{ purchase.get_lens_type_display }}</p>
                        <p><strong>Lens Cost:</strong> ₹{{ purchase.lens_cost }}</p>
                        <p><strong>Frame Name:</strong> {{ purchase.frame_name }}</p>
                        <p><strong>Frame Type:</strong> {{ purchase.get_frame_type_display }}</p>
                        <p><strong>Frame Cost:</strong> ₹{{ purchase.frame_cost }}</p>
                    </div>
                </div>
            </div>

            <!-- Prescription Details (if applicable) -->
            {% if purchase.prescription %}
                <div class="row mt-4">
                    <div class="col-md-12">
                        <h4 class="section-title text-primary"><i class="fas fa-file-medical"></i> Prescription Details</h4>
                        <div class="info-box">
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th>Eye</th>
                                        <th>SPH</th>
                                        <th>CYL</th>
                                        <th>AXIS</th>
                                        <th>ADD</th>
                                        <th>Vision</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Left Eye (OS)</strong></td>
                                        <td>{{ purchase.prescription.sph_left }}</td>
                                        <td>{{ purchase.prescription.cyl_left }}</td>
                                        <td>{{ purchase.prescription.axis_left }}</td>
                                        <td>{{ purchase.prescription.add_left }}</td>
                                        <td>{{ purchase.prescription.vision_left }}</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Right Eye (OD)</strong></td>
                                        <td>{{ purchase.prescription.sph_right }}</td>
                                        <td>{{ purchase.prescription.cyl_right }}</td>
                                        <td>{{ purchase.prescription.axis_right }}</td>
                                        <td>{{ purchase.prescription.add_right }}</td>
                                        <td>{{ purchase.prescription.vision_right }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="text-center mt-4">
        <a href="{% url 'customers:customer_details' purchase.customer.id %}" class="btn btn-secondary btn-lg">
            <i class="fas fa-arrow-left"></i> Back to Customer Details
        </a>
    </div>
</div>
{% endblock %}